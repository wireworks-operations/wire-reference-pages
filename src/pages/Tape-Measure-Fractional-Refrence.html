<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tape Measure Fractional Reference</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#1b5cff', container: '#dbe1ff', 'on-container': '#001453' },
                        surface: { DEFAULT: '#fdfbff', container: '#f3f3f7', 'on-surface': '#1b1b1f', 'variant': '#e3e2e6' },
                        dark: { surface: '#111318', 'on-surface': '#e2e2e9', 'surface-container': '#1e1f25' }
                    },
                    borderRadius: { 'md3': '28px' }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer base {
            body { @apply bg-surface text-surface-on-surface transition-colors duration-300 font-sans; }
            .dark body { @apply bg-dark-surface text-dark-on-surface; }
        }
        @layer components {
            .md3-card { @apply bg-surface-container rounded-md3 p-6 mb-8 border border-transparent transition-all shadow-sm; }
            .dark .md3-card { @apply bg-dark-surface-container; }
            .md3-title { @apply text-2xl font-black mb-6 flex items-center gap-3; }
            .badge { @apply px-2 py-0.5 bg-primary/10 text-primary text-[10px] font-black rounded uppercase border border-primary/20; }
            .md3-chip { @apply px-4 py-2 rounded-full border border-surface-variant font-medium transition-colors hover:bg-surface-variant text-sm; }
            .md3-chip.active { @apply bg-primary-container text-primary-on-container border-transparent; }
        }
    </style>
    <script>
        (function() {
            const savedTheme = localStorage.getItem("theme") || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            if (savedTheme === 'dark') document.documentElement.classList.add('dark');
        })();
    </script>
</head>
<body class="min-h-screen">
    <div class="max-w-4xl mx-auto px-6 py-12">
        <header class="flex flex-col gap-8 mb-12">
            <div class="flex items-center justify-between">
                <a href="../../index.html" class="inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-surface-variant hover:bg-primary hover:text-white transition-all font-bold text-sm group">
                    <svg class="w-5 h-5 transition-transform group-hover:-translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"/></svg>
                    Back to Hub
                </a>
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-primary to-blue-700 rounded-xl shadow-lg flex items-center justify-center text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                    </div>
                    <span class="font-black tracking-tight text-xl hidden sm:block">EECOL Wire Hub</span>
                </div>
            </div>

            <div class="bg-primary/5 rounded-[32px] p-8 border border-primary/10">
                <div class="flex items-center gap-3 mb-4">
                    <span class="badge">Reference</span>
                    <span class="badge">Tool</span>
                </div>
                <h1 class="text-4xl font-black tracking-tight mb-4">Tape Measure Fractional Reference</h1>
                <p class="text-surface-on-surface/60 leading-relaxed font-medium max-w-2xl">
                    Interactive visualization of the first inch. Compare fractions and decimals with aligned metric (mm) measurements.
                </p>
            </div>
        </header>

        <main>
            <section class="md3-card">
                <div class="flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8">
                    <h2 class="text-xl font-bold">Interactive Ruler</h2>
                    <div class="flex flex-wrap gap-2" id="labelControls">
                        <button class="md3-chip active" data-mode="fractions">Fractions</button>
                        <button class="md3-chip" data-mode="decimals">Decimals</button>
                        <button class="md3-chip" data-mode="both">Both</button>
                    </div>
                </div>

                <div class="bg-slate-900 rounded-2xl p-4 md:p-8 overflow-hidden">
                    <svg id="ruler" width="100%" viewBox="0 0 820 250" class="w-full h-auto">
                      <!-- Imperial row -->
                      <rect x="10" y="20" width="800" height="70" rx="8" fill="#0f172a" stroke="#1e293b" />
                      <line x1="10" y1="90" x2="810" y2="90" stroke="#1e293b" stroke-width="1"/>
                      <g id="ticks-inch"></g>
                      <g id="labels-inch"></g>
                      <g transform="translate(790, 110)">
                        <rect x="-16" y="-18" width="32" height="24" rx="4" fill="#1e293b" stroke="#334155"/>
                        <text x="0" y="0" fill="#f8fafc" font-size="12" text-anchor="middle" dominant-baseline="central">1″</text>
                      </g>

                      <!-- Metric row -->
                      <rect x="10" y="130" width="800" height="70" rx="8" fill="#0f172a" stroke="#1e293b" />
                      <line x1="10" y1="200" x2="810" y2="200" stroke="#1e293b" stroke-width="1"/>

                      <g id="ticks-mm"></g>
                      <g id="labels-mm"></g>
                      <g transform="translate(790, 220)">
                        <rect x="-22" y="-18" width="44" height="24" rx="4" fill="#1e293b" stroke="#334155"/>
                        <text x="0" y="0" fill="#fde047" font-size="12" text-anchor="middle" dominant-baseline="central">25.4mm</text>
                      </g>
                    </svg>
                </div>

                <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8 text-sm">
                    <div class="space-y-4">
                        <h3 class="font-bold text-primary flex items-center gap-2">
                            <span class="w-2 h-2 rounded-full bg-primary"></span>
                            Imperial Scale (Top)
                        </h3>
                        <p class="text-surface-on-surface/60 font-medium">Ticks at every 1/16″. Boldest ticks represent the full inch and half-inch marks.</p>
                        <div class="flex gap-4">
                           <div class="flex items-center gap-2 text-xs font-bold"><span class="w-4 h-0.5 bg-white"></span> 1″</div>
                           <div class="flex items-center gap-2 text-xs font-bold text-blue-300"><span class="w-4 h-0.5 bg-blue-300"></span> 1/2, 1/4</div>
                           <div class="flex items-center gap-2 text-xs font-bold text-blue-500"><span class="w-4 h-0.5 bg-blue-500"></span> 1/16</div>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <h3 class="font-bold text-yellow-500 flex items-center gap-2">
                            <span class="w-2 h-2 rounded-full bg-yellow-500"></span>
                            Metric Scale (Bottom)
                        </h3>
                        <p class="text-surface-on-surface/60 font-medium">Aligned precisely with the inch. 1 inch = 25.4 mm. Ticks at every 1 mm.</p>
                        <div class="flex gap-4">
                            <div class="flex items-center gap-2 text-xs font-bold text-yellow-400"><span class="w-4 h-0.5 bg-yellow-400"></span> 10mm</div>
                            <div class="flex items-center gap-2 text-xs font-bold text-yellow-600"><span class="w-4 h-0.5 bg-yellow-600"></span> 1mm</div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="mt-24 pt-10 border-t border-surface-variant text-center text-[10px] text-surface-on-surface/30 font-black uppercase tracking-[0.2em]">
            EECOL Wire Room · Reference System · Tape Reference
        </footer>
    </div>

    <script>
    (function() {
      const W = 800;
      const left = 10;
      const baselineIn = 90;
      const baselineMM = 200;

      const posInch = Array.from({length: 17}, (_, i) => i);
      const ticksInG = document.getElementById('ticks-inch');
      const labelsInG = document.getElementById('labels-inch');

      function tickStyleInch(i) {
        if (i === 0 || i === 16) return {h: 52, w: 4, color: '#ffffff'};
        if (i % 8 === 0)         return {h: 44, w: 3, color: '#93c5fd'};
        if (i % 4 === 0)         return {h: 38, w: 2.5, color: '#93c5fd'};
        if (i % 2 === 0)         return {h: 30, w: 2, color: '#60a5fa'};
        return                        {h: 22, w: 1.5, color: '#3b82f6'};
      }
      function xAtInch(i) { return left + (W * (i/16)); }

      function toFraction(i) {
        if (i === 0) return '0';
        if (i === 16) return '1';
        const g = (a,b)=>b?g(b,a%b):a, den=16, d=g(i,den);
        const n=i/d, dd=den/d;
        return `${n}⁄${dd}`;
      }
      function toDecimal(i) { return (i/16).toFixed(4).replace(/\.?0+$/,''); }

      function renderInchTicks() {
        ticksInG.innerHTML = '';
        posInch.forEach(i => {
          const s = tickStyleInch(i);
          const x = xAtInch(i);
          const line = document.createElementNS('http://www.w3.org/2000/svg','line');
          line.setAttribute('x1', x);
          line.setAttribute('y1', baselineIn - s.h);
          line.setAttribute('x2', x);
          line.setAttribute('y2', baselineIn);
          line.setAttribute('stroke', s.color);
          line.setAttribute('stroke-width', s.w);
          ticksInG.appendChild(line);
        });
      }

      function renderInchLabels(mode) {
        labelsInG.innerHTML = '';
        posInch.forEach(i => {
          const x = xAtInch(i);
          const showZero = (i === 0), showEnd = (i === 16);
          let frac = toFraction(i);
          let dec  = toDecimal(i);
          let primary = '', secondary = '';

          if (mode === 'fractions') {
            primary = showZero ? '0″' : (showEnd ? '1″' : frac + '″');
          } else if (mode === 'decimals') {
            primary = showZero ? '0.0' : (showEnd ? '1.0' : dec);
          } else {
            primary  = showZero ? '0″' : (showEnd ? '1″' : frac + '″');
            secondary= showZero ? '0.0' : (showEnd ? '1.0' : dec);
          }

          if (primary) {
            const t = document.createElementNS('http://www.w3.org/2000/svg','text');
            t.setAttribute('x', x);
            t.setAttribute('y', baselineIn + 18);
            t.setAttribute('fill', '#f1f5f9');
            t.setAttribute('font-size', '11');
            t.setAttribute('font-weight', '600');
            t.setAttribute('text-anchor', 'middle');
            t.textContent = primary;
            labelsInG.appendChild(t);
          }
          if (secondary && mode === 'both') {
            const t2 = document.createElementNS('http://www.w3.org/2000/svg','text');
            t2.setAttribute('x', x);
            t2.setAttribute('y', baselineIn + 34);
            t2.setAttribute('fill', '#94a3b8');
            t2.setAttribute('font-size', '10');
            t2.setAttribute('text-anchor', 'middle');
            t2.textContent = secondary;
            labelsInG.appendChild(t2);
          }
        });
      }

      const MM_MAX = 25.4;
      function xAtMM(mm) { return left + (W * (mm / MM_MAX)); }
      const ticksMmG = document.getElementById('ticks-mm');
      const labelsMmG = document.getElementById('labels-mm');

      function renderMMTicks() {
        ticksMmG.innerHTML = '';
        for (let mm = 0; mm <= 25; mm++) {
          const x = xAtMM(mm);
          let h = 24, w = 1.5, c = '#eab308';
          if (mm % 10 === 0) { h = 42; w = 3; c = '#fde047'; }
          else if (mm % 5 === 0) { h = 34; w = 2.5; c = '#facc15'; }

          const line = document.createElementNS('http://www.w3.org/2000/svg','line');
          line.setAttribute('x1', x); line.setAttribute('y1', 200 - h);
          line.setAttribute('x2', x); line.setAttribute('y2', 200);
          line.setAttribute('stroke', c); line.setAttribute('stroke-width', w);
          ticksMmG.appendChild(line);
        }
        // 25.4 tick
        const lineEnd = document.createElementNS('http://www.w3.org/2000/svg','line');
        lineEnd.setAttribute('x1', xAtMM(25.4)); lineEnd.setAttribute('y1', 200 - 42);
        lineEnd.setAttribute('x2', xAtMM(25.4)); lineEnd.setAttribute('y2', 200);
        lineEnd.setAttribute('stroke', '#fde047'); lineEnd.setAttribute('stroke-width', 3);
        ticksMmG.appendChild(lineEnd);
      }

      function renderMMLabels() {
        labelsMmG.innerHTML = '';
        for (let mm = 0; mm <= 25; mm++) {
          const x = xAtMM(mm);
          const t = document.createElementNS('http://www.w3.org/2000/svg','text');
          t.setAttribute('x', x); t.setAttribute('y', 218);
          t.setAttribute('fill', '#fde047'); t.setAttribute('font-size', '10');
          t.setAttribute('font-weight', '600'); t.setAttribute('text-anchor', 'middle');
          t.textContent = mm;
          labelsMmG.appendChild(t);
        }
      }

      const labelControls = document.getElementById('labelControls');
      labelControls.addEventListener('click', (e) => {
          const btn = e.target.closest('.md3-chip');
          if (!btn) return;
          document.querySelectorAll('#labelControls .md3-chip').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          renderInchLabels(btn.dataset.mode);
      });

      renderInchTicks();
      renderInchLabels('fractions');
      renderMMTicks();
      renderMMLabels();

      window.addEventListener('keydown', (e) => {
        if (e.key.toLowerCase() === 'f') setMode('fractions');
        if (e.key.toLowerCase() === 'd') setMode('decimals');
        if (e.key.toLowerCase() === 'b') setMode('both');
      });

      function setMode(next) {
        document.querySelectorAll('#labelControls .md3-chip').forEach(b => {
          if (b.dataset.mode === next) b.classList.add('active');
          else b.classList.remove('active');
        });
        renderInchLabels(next);
      }
    })();
    </script>
</body>
</html>
