<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Imperial (1″) with Metric (0–25.4 mm) Scale</title>
<style>
  /* ===== Component scope ===== */
  .tm1 {
    --bg: #0b0c0f;
    --panel: #11141a;
    --text: #e6edf3;
    --muted: #9fb1c1;
    --accent: #4cc2ff;
    --tick-bold: #ffffff;
    --tick-med: #a4d3ff;
    --tick-thin: #6ea8d9;
    --metric-bold: #ffe08a;
    --metric-med:  #ffd062;
    --metric-thin: #eab54e;
    --guide: #2a3542;
    --label: #e6edf3;
    --label-muted: #a9b6c3;
    --inch-fill: #243142;
    --mm-fill:   #2a2f3a;

    font-family: system-ui, Segoe UI, Inter, Roboto, Helvetica, Arial, sans-serif;
    color: var(--text);
    background: var(--bg);
    padding: 1.25rem;
  }

  .tm1 .card {
    background: linear-gradient(180deg, var(--panel), #0d1218);
    border: 1px solid #1f2937;
    border-radius: 12px;
    padding: 1rem 1rem 1.25rem;
    max-width: 920px;
    margin: 0 auto;
    box-shadow: 0 10px 30px rgba(0,0,0,.35);
  }

  .tm1 h1 { font-size: 1.15rem; margin: 0 0 .5rem 0; letter-spacing: .2px; }
  .tm1 p.sub { margin: 0 0 .75rem 0; color: var(--muted); font-size: .95rem; }

  /* Toolbar */
  .tm1 .bar { display: flex; gap: .75rem; align-items: center; flex-wrap: wrap; margin: .75rem 0 1rem; }
  .tm1 .bar .seg { display: inline-flex; border: 1px solid #324255; border-radius: 8px; overflow: hidden; }
  .tm1 .bar button {
    appearance: none; background: transparent; color: var(--text);
    border: none; padding: .5rem .75rem; cursor: pointer; font-weight: 600;
  }
  .tm1 .bar button[aria-pressed="true"] { background: #1b2a3a; color: #e9f6ff; }
  .tm1 .bar .hint { color: var(--label-muted); font-size: .9rem; }

  /* Ruler wrapper */
  .tm1 .ruler-wrap {
    background: var(--inch-fill);
    border: 1px solid #2d3a4a;
    border-radius: 12px;
    padding: 1rem;
  }

  /* Legend */
  .tm1 .legend {
    display: grid;
    grid-template-columns: repeat(3, minmax(120px, 1fr));
    gap: .5rem 1rem;
    margin-top: .75rem;
  }
  .tm1 .legend .row { display: flex; align-items: center; gap: .5rem; color: var(--label-muted); font-size: .92rem; }
  .tm1 .legend .swatch { width: 28px; height: 0; border-top-width: 4px; border-top-style: solid; }
  .tm1 .legend .swatch.thin { border-top-width: 2px; }
  .tm1 .legend .swatch.med { border-top-width: 3px; }
  .tm1 .legend .swatch.bold { border-top-width: 5px; }
</style>
</head>
<body>
  <div class="tm1" role="region" aria-label="Imperial and metric tape diagram (first inch)">
    <div class="card">
      <h1>Imperial 1″ with Aligned Metric Scale (0–25.4 mm)</h1>
      <p class="sub">Top: imperial ticks at every 1⁄16″ with fractional/decimal labels. Bottom: metric ticks and labels at every 1 mm.</p>

      <!-- Toolbar -->
      <div class="bar" role="toolbar" aria-label="Label display options">
        <div class="seg" role="group" aria-label="Toggle label type">
          <button id="btnFrac" aria-pressed="true" aria-label="Show fractional labels (e.g., 5⁄16 inch)">Fractions</button>
          <button id="btnDec" aria-pressed="false" aria-label="Show decimal labels (e.g., 0.3125 inch)">Decimals</button>
          <button id="btnBoth" aria-pressed="false" aria-label="Show both fractional and decimal labels">Both</button>
        </div>
        <span class="hint">Shortcuts: <kbd>F</kbd> (Fractions), <kbd>D</kbd> (Decimals), <kbd>B</kbd> (Both).</span>
      </div>

      <!-- Rulers -->
      <div class="ruler-wrap">
        <svg id="ruler" width="100%" viewBox="0 0 820 250" role="img" aria-labelledby="ttl desc">
          <title id="ttl">Imperial first inch with aligned metric scale</title>
          <desc id="desc">Top row shows 0 to 1 inch in 1/16″ increments; bottom row shows 0 to 25.4 mm with labels every 1 mm.</desc>

          <!-- ===== Inch row ===== -->
          <rect x="10" y="20" width="800" height="70" rx="8" fill="#0f1a26" stroke="#223244" />
          <line x1="10" y1="90" x2="810" y2="90" stroke="#203044" stroke-width="1"/>
          <g id="ticks-inch"></g>
          <g id="labels-inch"></g>
          <g id="inchLabel" transform="translate(790, 110)">
            <rect x="-16" y="-18" width="32" height="24" rx="4" fill="#162233" stroke="#2b3d52"/>
            <text x="0" y="0" fill="#cfe9ff" font-size="12" text-anchor="middle" dominant-baseline="central">1″</text>
          </g>

          <!-- ===== Metric row ===== -->
          <rect x="10" y="130" width="800" height="70" rx="8" fill="#141924" stroke="#223244" />
          <line x1="10" y1="200" x2="810" y2="200" stroke="#203044" stroke-width="1"/>

          <g id="ticks-mm"></g>
          <g id="labels-mm"></g>
          <g id="mmLabel" transform="translate(790, 220)">
            <rect x="-22" y="-18" width="44" height="24" rx="4" fill="#1e2230" stroke="#2b3d52"/>
            <text x="0" y="0" fill="#ffe7ad" font-size="12" text-anchor="middle" dominant-baseline="central">25.4 mm</text>
          </g>
        </svg>
      </div>

      <div class="legend" aria-label="Legend for tick styles">
        <div class="row"><span class="swatch bold" style="border-top-color:#ffffff"></span> Inch: Bold = full inch</div>
        <div class="row"><span class="swatch med"  style="border-top-color:#a4d3ff"></span> Inch: Medium = 1⁄2, 1⁄4, 3⁄4, 1⁄8s</div>
        <div class="row"><span class="swatch thin" style="border-top-color:#6ea8d9"></span> Inch: Thin = remaining 1⁄16s</div>

        <div class="row"><span class="swatch bold" style="border-top-color:#ffe08a"></span> Metric: Bold = 10 mm</div>
        <div class="row"><span class="swatch med"  style="border-top-color:#ffd062"></span> Metric: Medium = 5 mm</div>
        <div class="row"><span class="swatch thin" style="border-top-color:#eab54e"></span> Metric: Thin = 1 mm</div>
      </div>
    </div>
  </div>

<script>
(function() {
  // ===== Shared config =====
  const W = 800;         // drawable width for the 0–1 inch span (also 0–25.4 mm)
  const left = 10;

  // ----- Inch row geometry -----
  const baselineIn = 90;

  // ----- Metric row geometry -----
  const baselineMM = 200;

  // ===== INCH SCALE (0..16 sixteenths) =====
  const posInch = Array.from({length: 17}, (_, i) => i);

  function tickStyleInch(i) {
    if (i === 0 || i === 16) return {h: 52, w: 5, color: '#ffffff'};
    if (i % 8 === 0)         return {h: 44, w: 4, color: '#a4d3ff'}; // 1/2
    if (i % 4 === 0)         return {h: 40, w: 3, color: '#a4d3ff'}; // 1/4 multiples
    if (i % 2 === 0)         return {h: 32, w: 3, color: '#a4d3ff'}; // 1/8 multiples
    return                        {h: 24, w: 2, color: '#6ea8d9'};    // 1/16
  }
  function xAtInch(i) { return left + (W * (i/16)); }

  function toFraction(i) {
    if (i === 0) return '0';
    if (i === 16) return '1';
    const g = (a,b)=>b?g(b,a%b):a, den=16, d=g(i,den);
    const n=i/d, dd=den/d;
    const unicode = {'1/2':'½','1/4':'¼','3/4':'¾','1/8':'⅛','3/8':'⅜','5/8':'⅝','7/8':'⅞'};
    const key = `${n}/${dd}`;
    return unicode[key] || `${n}⁄${dd}`;
  }
  function toDecimal(i) { return (i/16).toFixed(4).replace(/\.?0+$/,''); }

  const ticksInG = document.getElementById('ticks-inch');
  const labelsInG = document.getElementById('labels-inch');

  function renderInchTicks() {
    ticksInG.innerHTML = '';
    posInch.forEach(i => {
      const s = tickStyleInch(i);
      const x = xAtInch(i);
      const line = document.createElementNS('http://www.w3.org/2000/svg','line');
      line.setAttribute('x1', x);
      line.setAttribute('y1', baselineIn - s.h);
      line.setAttribute('x2', x);
      line.setAttribute('y2', baselineIn);
      line.setAttribute('stroke', s.color);
      line.setAttribute('stroke-width', s.w);
      line.setAttribute('shape-rendering','crispEdges');
      ticksInG.appendChild(line);
    });
  }

  function renderInchLabels(mode) {
    labelsInG.innerHTML = '';
    posInch.forEach(i => {
      const x = xAtInch(i);
      const showZero = (i === 0), showEnd = (i === 16);
      let frac = toFraction(i);
      let dec  = toDecimal(i);
      let primary = '', secondary = '';

      if (mode === 'fractions') {
        primary = showZero ? '0″' : (showEnd ? '1″' : frac + '″');
      } else if (mode === 'decimals') {
        primary = showZero ? '0.0' : (showEnd ? '1.0' : dec);
      } else {
        primary  = showZero ? '0″' : (showEnd ? '1″' : frac + '″');
        secondary= showZero ? '0.0' : (showEnd ? '1.0' : dec);
      }

      if (primary) {
        const t = document.createElementNS('http://www.w3.org/2000/svg','text');
        t.setAttribute('x', x);
        t.setAttribute('y', baselineIn + 18);
        t.setAttribute('fill', '#e6edf3');
        t.setAttribute('font-size', '12');
        t.setAttribute('text-anchor', 'middle');
        t.textContent = primary;
        labelsInG.appendChild(t);
      }
      if (secondary && mode === 'both') {
        const t2 = document.createElementNS('http://www.w3.org/2000/svg','text');
        t2.setAttribute('x', x);
        t2.setAttribute('y', baselineIn + 36);
        t2.setAttribute('fill', '#9fb1c1');
        t2.setAttribute('font-size', '11');
        t2.setAttribute('text-anchor', 'middle');
        t2.textContent = secondary;
        labelsInG.appendChild(t2);
      }
    });
  }

  // ===== METRIC SCALE =====
  const MM_MAX = 25.4;
  function xAtMM(mm) { return left + (W * (mm / MM_MAX)); }

  function tickStyleMM(mm) {
    if (mm === 0 || mm === MM_MAX) return {h: 50, w: 5, color: '#ffe08a'}; // start/end
    if (Number.isInteger(mm)) {
      if (mm % 10 === 0) return {h: 42, w: 4, color: '#ffe08a'}; // 10 mm
      if (mm % 5  === 0) return {h: 34, w: 3, color: '#ffd062'}; // 5 mm
      return {h: 24, w: 2, color: '#eab54e'};                     // 1 mm
    }
    return {h: 20, w: 2, color: '#eab54e'};
  }

  const ticksMmG = document.getElementById('ticks-mm');
  const labelsMmG = document.getElementById('labels-mm');

  function renderMMTicks() {
    ticksMmG.innerHTML = '';
    // 0..25 integer mm ticks
    for (let mm = 0; mm <= 25; mm++) {
      const s = tickStyleMM(mm);
      const x = xAtMM(mm);
      const line = document.createElementNS('http://www.w3.org/2000/svg','line');
      line.setAttribute('x1', x);
      line.setAttribute('y1', 200 - s.h);
      line.setAttribute('x2', x);
      line.setAttribute('y2', 200);
      line.setAttribute('stroke', s.color);
      line.setAttribute('stroke-width', s.w);
      line.setAttribute('shape-rendering','crispEdges');
      ticksMmG.appendChild(line);
    }
    // 25.4 mm end tick
    {
      const mm = MM_MAX;
      const s = tickStyleMM(mm);
      const x = xAtMM(mm);
      const line = document.createElementNS('http://www.w3.org/2000/svg','line');
      line.setAttribute('x1', x);
      line.setAttribute('y1', 200 - s.h);
      line.setAttribute('x2', x);
      line.setAttribute('y2', 200);
      line.setAttribute('stroke', s.color);
      line.setAttribute('stroke-width', s.w);
      line.setAttribute('shape-rendering','crispEdges');
      ticksMmG.appendChild(line);
    }
  }

  // <<< Updated: label every 1 mm >>>
  function renderMMLabels() {
    labelsMmG.innerHTML = '';

    // 0..25 every 1 mm (compact numeric labels)
    for (let mm = 0; mm <= 25; mm++) {
      const x = xAtMM(mm);
      const t = document.createElementNS('http://www.w3.org/2000/svg','text');
      t.setAttribute('x', x);
      t.setAttribute('y', 218);                 // baselineMM + 18
      t.setAttribute('fill', '#ffe7ad');
      t.setAttribute('font-size', '11');
      t.setAttribute('text-anchor', 'middle');
      t.textContent = `${mm}`;
      labelsMmG.appendChild(t);
    }

    // Unit label centered under the row
    const unit = document.createElementNS('http://www.w3.org/2000/svg','text');
    unit.setAttribute('x', left + W / 2);
    unit.setAttribute('y', 236);                // baselineMM + 36
    unit.setAttribute('fill', '#ffd98a');
    unit.setAttribute('font-size', '11');
    unit.setAttribute('text-anchor', 'middle');
    unit.textContent = 'mm';
    labelsMmG.appendChild(unit);
  }

  // ===== Controls =====
  const btnFrac = document.getElementById('btnFrac');
  const btnDec  = document.getElementById('btnDec');
  const btnBoth = document.getElementById('btnBoth');
  let mode = 'fractions';

  function setMode(next) {
    mode = next;
    btnFrac.setAttribute('aria-pressed', String(next==='fractions'));
    btnDec .setAttribute('aria-pressed', String(next==='decimals'));
    btnBoth.setAttribute('aria-pressed', String(next==='both'));
    renderInchLabels(mode);
  }
  btnFrac.addEventListener('click', ()=>setMode('fractions'));
  btnDec .addEventListener('click', ()=>setMode('decimals'));
  btnBoth.addEventListener('click', ()=>setMode('both'));
  window.addEventListener('keydown', (e) => {
    if (e.key.toLowerCase() === 'f') setMode('fractions');
    if (e.key.toLowerCase() === 'd') setMode('decimals');
    if (e.key.toLowerCase() === 'b') setMode('both');
  });

  // ===== Initial render =====
  renderInchTicks();
  renderInchLabels(mode);
  renderMMTicks();
  renderMMLabels();
})();
</script>
</body>
</html>